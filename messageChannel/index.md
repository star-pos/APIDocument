# 消息通道

## 使用方式

提供机构号以及接收通知的服务器地址给对接人员即可完成配置。开发者需要按照本文档的返回参数返回json

## 通讯协议

| 传输方式 | 通讯采用HTTP方式 |
| :---: | :--- |
| 提交方式 | 采用POST请求 |
| 字符编码 | 请求交易报文中的编码方式默认为GBK |
| 报文格式 | 以json做为数据传输格式 注:“Content-Type","application/json” |

## 记账结果通知

### 请求参数

| **序号** | **中文域名** | **英文域名** | **类型** | **域中值的填写方法** |
| :---: | :--- | :--- | :--- | :---: |
| 1 | 结算日期 | BalDate | Char\(8\) | YYYYMMDD |
| 2 | 合作商号 | AgentId | Char\(10\) |  |
| 3 | 交易流水号 | TxnLogId | Char\(6\) | 对应交易上送的tradeNo字段 |
| 4 | 收单商户号 | BusinessId | Char\(15\) |  |
| 5 | 收单终端号 | SDTermNo | Char\(32\) |  |
| 6 | 交易码 | TxnCode | Char\(4\) | N001：扫手机<br> N002：扫POS<br> N007：公众号支付<br> L005：扫码退款<br> L020：银行卡消费<br> L030：银行卡撤销<br> L009：银行卡冲正<br> 4433040：台牌微信<br> 4433050：台牌支付宝<br> 2010060：预授权完成<br> 2010070：预授权完成撤销 |
| 7 | 支付通道 | PayChannel | Char\(2\) | 1.支付宝ISV <br>             2.微信支付 <br>              3.百度百付宝 <br>                  4.苏宁易付宝    <br>     5.支付宝城市服务商<br> 6 京东钱包<br>                  7.QQ钱包    <br>               8 翼支付 |
| 8 | 交易日期 | TxnDate | Char\(8\) | YYYYMMDD |
| 9 | 交易时间 | TxnTime | Char\(6\) | HHMMSS |
| 10 | 交易金额 | TxnAmt | Char\(10\) | 按元为单位填写 |
| 11 | 交易状态 | TxnStatus | CHAR\(1\) | 1：成功 |
| 12 | 支付银行 | BankType | Char\(20\) | 返回的支付银行 |
| 13 | 支付通道订单号 | OfficeId | Char\(64\) | 微信/支付宝订单号 |
| 14 | 商户单号 | ChannelId | Char\(64\) | 对应交易上送selOrderNo字段 |
| 15 | C端用户信息 | UserId | Char\(64\) | C端支付用户信息 |
| 16 | 平台流水号 | logNo | Char\(20\) |  |
| 17 | 银行卡借贷记标识 | CrdFlg | Char\(1\) | 1:借记卡 <br>2：贷记卡 |

### 返回参数

| **序号** | **中文域名** | **英文域名** | **类型** | **域中值的填写方法** |
| :---: | :--- | :--- | :--- | :--- |
| 1 | 响应码 | RspCode | Char\(6\) | 000000成功，其它失败 |
| 2 | 描述 | RspDes | Char\(64\) | 不足右补空格 |



